@page "/settings"
@inject ThemeService ThemeService
@inject AuthenticationService AuthService
@inject ExportService ExportService

<PageTitle>Settings - My Journal</PageTitle>

<div class="container">
    <h3>Settings</h3>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Appearance</h5>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="darkModeSwitch"
                       checked="@isDarkMode" @onchange="ToggleDarkMode">
                <label class="form-check-label" for="darkModeSwitch">
                    Dark Mode
                </label>
            </div>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Security</h5>
            <p class="text-muted">PIN protection coming soon</p>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Export</h5>
            <p class="text-muted">Export functionality coming soon</p>
        </div>
    </div>
</div>

@code
{


    private

    bool
     isDarkMode
    =

    false
    ;



    protected

    override

    void

    OnInitialized
    (
    )


    {

        isDarkMode
    =
     ThemeService
    .
    CurrentTheme
    ==

    "Dark"
    ;


    }



    private

    async

    Task

    ToggleDarkMode
    (
    ChangeEventArgs
     e
    )


    {

        isDarkMode
    =

    (
    bool
    )
    e
    .
    Value
    !
    ;


        await
         ThemeService
        .
        SetThemeAsync
        (
        isDarkMode
        ?

        "Dark"

        :

        "Light"
        )
        ;


    }

}